<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Royal Gift ‚Äì Queen Access</title>

<link rel="manifest" href="manifest.webmanifest"/>
<meta name="theme-color" content="#c59fc9"/>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{--brand:#c59fc9;--bg1:#ffd6e7;--bg2:#fff8f0;--text:#1e1b4b;--glass:#ffffff40;--glass-brd:#ffffff66}
body{margin:0;font-family:'Segoe UI',sans-serif;color:var(--text);min-height:100vh;overflow:hidden;
     background:linear-gradient(135deg,var(--bg1),var(--bg2));background-size:400% 400%;animation:bg 20s ease-in-out infinite}
@keyframes bg{0%{background-position:0 0}50%{background-position:100% 100%}100%{background-position:0 0}}
.hidden{display:none}

/* —Å—Ç–µ–∫–ª–æ */
.glass{background:var(--glass);border:1px solid var(--glass-brd);backdrop-filter:blur(12px);
       box-shadow:inset 0 0 18px rgba(255,255,255,.35),inset 0 0 6px rgba(255,255,255,.15)}

/* –∫–Ω–æ–ø–∫–∞-–±–ª–∏–∫ */
.btn-glow{position:relative;border:3px solid var(--brand);overflow:hidden;background:var(--brand);color:#fff}
.btn-glow::after{content:'';position:absolute;top:0;left:-120%;width:60%;height:100%;
  background:linear-gradient(120deg,transparent 10%,rgba(255,255,255,.55) 35%,transparent 60%);
  transform:skewX(-25deg);animation:shine 4s ease-in-out infinite}
@keyframes shine{0%{left:-120%}55%{left:130%}100%{left:130%}}

/* shake */
@keyframes shake{10%,90%{transform:translateX(-3px);}20%,80%{transform:translateX(3px);}
30%,50%,70%{transform:translateX(-5px);}40%,60%{transform:translateX(5px);}}
.shake{animation:shake .48s}

/* flip (–ø–æ–¥–∞—Ä–∫–∏) */
.flip{perspective:800px;cursor:pointer}
.flip-inner{position:relative;transition:transform .6s;transform-style:preserve-3d;height:100%;animation:vibrate .8s linear infinite}
.flip.flipped .flip-inner{transform:rotateY(180deg);animation:none}
.face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem;backface-visibility:hidden}
.back{transform:rotateY(180deg)}
@keyframes vibrate{0%{transform:translate(0)}20%{transform:translate(-6px,4px)}40%{transform:translate(5px,-5px)}
60%{transform:translate(-5px,3px)}80%{transform:translate(4px,-6px)}100%{transform:translate(0)}}

/* —á–∞—Å—Ç–∏—Ü—ã */
#particles{position:fixed;inset:0;z-index:-1;pointer-events:none}

/* ----- CAPTCHA grid ----- */
#captchaGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:2px;width:300px;height:300px}
.c-tile{background:url('birthday.jpg') center/cover no-repeat;cursor:pointer;position:relative}
.c-tile:hover::after{content:'';position:absolute;inset:0;background:#ffffff40}
</style>
</head>
<body class="selection:bg-pink-300 flex items-center justify-center">

<div id="particles"></div>

<!-- –∏–Ω—Ç—Ä–æ -->
<div id="introAnim" class="fixed inset-0 flex items-center justify-center bg-[#0008] z-50">
  <lottie-player src="crown.json" speed="1" style="width:280px;height:280px" autoplay background="transparent"></lottie-player>
</div>

<!-- 1. –ø–∞—Ä–æ–ª—å -->
<section id="main" class="hidden flex flex-col items-center text-center space-y-4">
  <h1 class="text-3xl font-bold text-[var(--brand)]">–°–ª—É–∂–±–∞ —Ä–æ—Å–∫–æ—à–∏</h1>
  <p>–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç <strong>I'M A QUEEN</strong></p>
  <input id="code" class="input input-bordered w-64 text-center" placeholder="–∫–æ–¥‚Ä¶">
  <button id="enter" class="btn-glow px-6 py-2 rounded-xl font-semibold">–í–æ–π—Ç–∏</button>
  <p id="error" class="text-red-600 font-semibold hidden"></p>
</section>

<!-- 2. –æ—Ç—Å—á—ë—Ç -->
<p id="count" class="text-5xl font-extrabold hidden"></p>

<!-- 3. –∫–∞–ø—á–∞ -->
<section id="captcha" class="hidden flex flex-col items-center text-center space-y-4">
  <p><span class="font-semibold">–ù–∞–π–¥–∏ —Å–≤–æ—é –∫–æ—Ä–æ–ª–µ–≤—É üëë</span><br>–ù–∞–∂–º–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ç–æ—Ä:</p>
  <div id="captchaGrid"></div>
  <p id="capErr" class="text-red-600 font-semibold hidden">–ù–µ —Ç—É–¥–∞, —Ö–æ–ª–æ–ø! üîÑ</p>
</section>

<!-- 4. –ø–æ–¥–∞—Ä–∫–∏ -->
<section id="success" class="hidden flex flex-col items-center text-center space-y-6">
  <h2 class="text-3xl font-bold text-[var(--brand)]">–î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç!</h2>
  <div class="space-y-3">
    <div class="flip glass h-24"><div class="flip-inner">
      <div class="face front">üëë –û–¥–Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∞—è –∫—É–ø—é—Ä–∞ —Å—Ä–µ–¥–∏ –ø–æ–¥–¥–∞–Ω–Ω—ã—Ö</div>
      <div class="face back">üíµ –ù–∞—Å—Ç–æ—è—â–∞—è –∫—É–ø—é—Ä–∞ ‚Ññ 26</div></div></div>
    <div class="flip glass h-24"><div class="flip-inner">
      <div class="face front">üç∞ –ê–≤—Ç–æ—Ä—Å–∫–∏–π –¥–µ—Å–µ—Ä—Ç –æ—Ç —à–µ—Ñ–∞</div>
      <div class="face back">üßÅ –ö–∞–∫–æ–π –±—ã–ª –≤–æ –í–∫—É—Å–í–∏–ª–ª, –≤—Ä—É—á–∏—Ç —à–µ—Ñ –ù–∏–∫–∏—Ç–∞</div></div></div>
    <div class="flip glass h-24"><div class="flip-inner">
      <div class="face front">üíê –ë—É–∫–µ—Ç, –¥–æ—Å—Ç–æ–π–Ω—ã–π –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–≥–æ –¥–≤–æ—Ä—Ü–∞</div>
      <div class="face back">üå∑ –ì–Ω–æ–º—ã —Å–æ–±—Ä–∞–ª–∏ —ç—Ç–∏ —Ü–≤–µ—Ç—ã —Å–æ –≤—Å–µ–π –ø–ª–∞–Ω–µ—Ç—ã</div></div></div>
  </div>
</section>

<audio id="fanfare" src="https://cdn.pixabay.com/download/audio/2022/02/23/audio_381c2e7d8d.mp3" preload="auto"></audio>
<audio id="bgmusic" src="https://cdn.pixabay.com/download/audio/2022/07/26/audio_00a7a0d8f3.mp3" loop preload="auto"></audio>

<script>
const $ = s=>document.getElementById(s);

/* –∏–Ω—Ç—Ä–æ -> main */
setTimeout(()=>{ $('introAnim').style.display='none'; $('main').classList.remove('hidden'); },2500);

/* –≤–≤–æ–¥ –∫–æ–¥–∞ */
const enter=$('enter'), code=$('code'), error=$('error'), count=$('count');
enter.onclick=check; code.onkeyup=e=>e.key==='Enter'&&check();
function check(){
  error.classList.add('hidden');
  if(code.value.trim().toUpperCase()==="I'M A QUEEN"){ countdown(); }
  else{ error.textContent='–ö–æ–¥ –Ω–µ–≤–µ—Ä–Ω—ã–π ‚Äî —Ö–æ–ª–æ–ø!'; error.classList.remove('hidden');
        code.classList.add('shake'); setTimeout(()=>code.classList.remove('shake'),500); }
}

/* –æ—Ç—Å—á—ë—Ç 3-2-1 */
async function countdown(){
  $('main').classList.add('hidden'); count.classList.remove('hidden');
  for(let n=3;n>0;n--){count.textContent=n;await new Promise(r=>setTimeout(r,800));}
  count.classList.add('hidden'); showCaptcha();
}

/* –∫–∞–ø—á–∞ */
const grid=$('captchaGrid'), capErr=$('capErr');
function showCaptcha(){ $('captcha').classList.remove('hidden'); buildGrid(); }

function buildGrid(){
  grid.innerHTML='';                     /* –æ—á–∏—â–∞–µ–º, –µ—Å–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ */
  for(let i=1;i<=9;i++){
    const t=document.createElement('div');
    t.className='c-tile'; t.dataset.id=i;
    const r=Math.ceil(i/3)-1, c=(i-1)%3;
    t.style.backgroundPosition=`${-c*100/2}% ${-r*100/2}%`;
    t.onclick=tileClick; grid.appendChild(t);
  }
}
function tileClick(){
  capErr.classList.add('hidden');
  if(this.dataset.id==='6'){ openGifts(); }
  else{ capErr.classList.remove('hidden'); this.classList.add('shake');
        setTimeout(()=>this.classList.remove('shake'),500); }
}

/* –ø–æ–¥–∞—Ä–∫–∏ */
function openGifts(){
  $('captcha').classList.add('hidden'); $('success').classList.remove('hidden');
  confetti({particleCount:200,spread:180,origin:{y:0.7}});
  $('fanfare').play(); const bg=$('bgmusic'); bg.volume=.25; bg.play();
}

/* flip –ø–æ–¥–∞—Ä–∫–æ–≤ */
document.addEventListener('click',e=>{
  if(e.target.closest('.flip')) e.target.closest('.flip').classList.toggle('flipped');
});
</script>
</body>
</html>
