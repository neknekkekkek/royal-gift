<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Royal Gift ‚Äì Queen Access</title>

  <!-- PWA (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ ‚Äî —É–¥–∞–ª–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏) -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#c59fc9" />

  <!-- Tailwind + –≤–Ω–µ—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --brand:#c59fc9; --bg1:#ffd6e7; --bg2:#fff8f0; --text:#1e1b4b;
      --glass:#ffffff40; --glass-brd:#ffffff66;
    }
    body{
      margin:0;font-family:'Segoe UI',sans-serif;color:var(--text);
      min-height:100vh;overflow:hidden;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      background-size:400% 400%;animation:bgshift 20s ease-in-out infinite;
    }
    @keyframes bgshift{0%{background-position:0 0}50%{background-position:100% 100%}100%{background-position:0 0}}
    .hidden{display:none}

    /* –∫–∞—Ä—Ç–æ—á–∫–∞-—Å—Ç–µ–∫–ª–æ */
    .glass{
      background:var(--glass);
      border:1px solid var(--glass-brd);
      backdrop-filter:blur(12px);
      box-shadow:inset 0 0 18px rgba(255,255,255,.35),
                 inset 0 0 6px rgba(255,255,255,.15);
    }
    /* –∫–Ω–æ–ø–∫–∞ —Å ¬´—Å–æ–ª–Ω–µ—á–Ω—ã–º¬ª –±–ª–∏–∫–æ–º */
    .btn-glow{position:relative;border:3px solid var(--brand);overflow:hidden}
    .btn-glow::after{
      content:'';position:absolute;top:0;left:-120%;width:60%;height:100%;
      background:linear-gradient(120deg,transparent 10%,rgba(255,255,255,.55) 35%,transparent 60%);
      transform:skewX(-25deg);animation:shine 4s ease-in-out infinite}
    @keyframes shine{0%{left:-120%}55%{left:130%}100%{left:130%}}
    
    /* --- subtle wiggle –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ --- */
@keyframes wiggle {
  0%,100% { transform:rotateY(-3deg); }
  50%     { transform:rotateY( 3deg); }
}

/* –ø—Ä–∏–º–µ–Ω—è–µ–º, –ø–æ–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –ù–ï –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–∞ */
.flip:not(.flipped) .flip-inner {
  animation: wiggle 3s ease-in-out infinite;
}

/* –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É–ª–∏ ‚Äì —É–±–∏—Ä–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–µ –¥—ë—Ä–≥–∞–ª–∞—Å—å */
.flip.flipped .flip-inner {
  animation: none;
}

    /* shake –ø—Ä–∏ –æ—à–∏–±–∫–µ */
    @keyframes shake{10%,90%{transform:translateX(-3px);}20%,80%{transform:translateX(3px);}
      30%,50%,70%{transform:translateX(-5px);}40%,60%{transform:translateX(5px);}}
    .shake{animation:shake .48s}

    /* flip-–∫–∞—Ä—Ç–æ—á–∫–∞ */
    .flip{perspective:800px;cursor:pointer}
    .flip-inner{position:relative;transition:transform .6s;transform-style:preserve-3d;height:100%}
    .flip.flipped .flip-inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem;backface-visibility:hidden}
    .back{transform:rotateY(180deg)}

    /* —á–∞—Å—Ç–∏—Ü—ã */
    #particles{position:fixed;inset:0;z-index:-1;pointer-events:none}
  </style>
</head>
<body class="selection:bg-pink-300">

  <!-- —Ñ–æ–Ω-—á–∞—Å—Ç–∏—Ü—ã -->
  <div id="particles"></div>

  <!-- –∏–Ω—Ç—Ä–æ-–∫–æ—Ä–æ–Ω–∞ -->
  <div id="introAnim" class="fixed inset-0 flex items-center justify-center bg-[#0008] z-50">
    <lottie-player src="crown.json" background="transparent" speed="1"
                   style="width:280px;height:280px" autoplay></lottie-player>
  </div>

  <!-- –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
  <section id="main" class="hidden flex flex-col items-center justify-center min-h-screen text-center p-6 space-y-4">
    <h1 class="text-3xl font-bold text-[var(--brand)]">–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–æ—Å–∫–æ—à–∏ –Ω–∞ —Å–≤—è–∑–∏!</h1>
    <p>–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –í–∞—à –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è —É—Ä–æ–≤–Ω—è <strong>GOLD</strong>.<br>
       üëâ –ü—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ —Ç—Ä–∏–∂–¥—ã ¬´–Ø –ö–æ—Ä–æ–ª–µ–≤–∞¬ª<br>üëâ –í–≤–µ–¥–∏—Ç–µ –º–∞–≥–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ:</p>

    <input id="code" class="input input-bordered w-64 text-center" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥‚Ä¶"/>

    <button id="enter" class="btn-glow px-6 py-2 rounded-xl font-semibold bg-[var(--brand)] text-white">
      –í–æ–π—Ç–∏
    </button>

    <p id="error" class="text-red-600 font-semibold hidden"></p>
    <p id="count" class="text-5xl font-extrabold mt-4 hidden"></p>
  </section>

  <!-- —É—Å–ø–µ—Ö -->
  <section id="success" class="hidden flex flex-col items-center justify-center min-h-screen text-center p-6 space-y-6">
    <svg id="morph" width="120" height="120" viewBox="0 0 24 24" fill="none"
         stroke="#c59fc9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2l3 7h7l-5 5 2 7-6-4-6 4 2-7-5-5h7z"/>
    </svg>

    <div class="grid gap-4 w-full max-w-xs">
      <div class="flip glass h-24">
        <div class="flip-inner">
          <div class="face front">üëë –û–¥–Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∞—è –∫—É–ø—é—Ä–∞ —Å—Ä–µ–¥–∏ –ø–æ–¥–¥–∞–Ω–Ω—ã—Ö</div>
          <div class="face back">üíµ –ù–∞—Å—Ç–æ—è—â–∞—è –∫—É–ø—é—Ä–∞ ‚Ññ 26</div>
        </div>
      </div>

      <div class="flip glass h-24">
        <div class="flip-inner">
          <div class="face front">üç∞ –ê–≤—Ç–æ—Ä—Å–∫–∏–π –¥–µ—Å–µ—Ä—Ç –æ—Ç —à–µ—Ñ–∞</div>
          <div class="face back">üßÅ –ö–∞–∫–æ–π –±—ã–ª –≤–æ –í–∫—É—Å–í–∏–ª–ª–µ, –≤—Ä—É—á–∏—Ç —à–µ—Ñ –ù–∏–∫–∏—Ç–∞</div>
        </div>
      </div>

      <div class="flip glass h-24">
        <div class="flip-inner">
          <div class="face front">üíê –ë—É–∫–µ—Ç, –¥–æ—Å—Ç–æ–π–Ω—ã–π –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–≥–æ –¥–≤–æ—Ä—Ü–∞</div>
          <div class="face back">üå∑ –ì–Ω–æ–º—ã —Å–æ–±–∏—Ä–∞–ª–∏ —ç—Ç–∏ —Ü–≤–µ—Ç—ã —Å–æ –≤—Å–µ–π –ø–ª–∞–Ω–µ—Ç—ã</div>
        </div>
      </div>
    </div>

    <button id="share" class="btn bg-[var(--brand)] text-white px-4 py-2 rounded-xl">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—á–∞—Å—Ç—å–µ–º</button>
    <p>–° –ª—é–±–æ–≤—å—é,<br><em>–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–¥–æ—Å—Ç–∏‚Ñ¢</em></p>
  </section>

  <!-- –∑–≤—É–∫–∏ -->
  <audio id="fanfare" src="https://cdn.pixabay.com/download/audio/2022/02/23/audio_381c2e7d8d.mp3?filename=success-fanfare-trumpets-6185.mp3" preload="auto"></audio>
  <audio id="bgmusic" src="https://cdn.pixabay.com/download/audio/2022/07/26/audio_00a7a0d8f3.mp3?filename=magical-chime-113985.mp3" loop preload="auto"></audio>

<script>
const $ = id => document.getElementById(id);

/* DOM-—É–∑–ª—ã */
const intro  = $('introAnim'),
      main   = $('main'),
      success= $('success'),
      code   = $('code'),
      enter  = $('enter'),
      errorB = $('error'),
      countB = $('count'),
      fanfare= $('fanfare'),
      bgm    = $('bgmusic');

/* ‚Äî‚Äî‚Äî –∏–Ω—Ç—Ä–æ ‚Üí main ‚Äî‚Äî‚Äî */
function showMain(){
  intro.style.display = 'none';      // –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–±–∏—Ä–∞–µ–º overlay
  main.classList.remove('hidden');   // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
  initParticles();
}
setTimeout(showMain, 2500);          // —Ç–∞–π–º–µ—Ä-—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞
intro.addEventListener('click', showMain); // –∫–ª–∏–∫ –ø–æ –∫–æ—Ä–æ–Ω–µ ‚Äî —Ç–æ–∂–µ skip

/* ‚Äî‚Äî‚Äî —á–∞—Å—Ç–∏—Ü—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ ‚Äî‚Äî‚Äî */
function initParticles(){
  try{
    tsParticles.load('particles',{
      fullScreen:{enable:false},detectRetina:true,
      particles:{number:{value:30},size:{value:{min:2,max:4}},move:{enable:true,speed:0.4,parallax:{enable:true,smooth:20}},
      opacity:{value:{min:0.3,max:0.8}},color:{value:['#ff9dff','#9dfffc','#fff0c4']},links:{enable:false}}
    });
  }catch(e){console.warn('tsParticles –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ —Ñ–æ–Ω–∞');}
}

/* ‚Äî‚Äî‚Äî –≤–≤–æ–¥ –∫–æ–¥–∞ ‚Äî‚Äî‚Äî */
const magic = "I'M A QUEEN";
let phIdx=0;
setInterval(()=>{if(document.activeElement!==code){code.placeholder=magic.slice(0,phIdx);phIdx=(phIdx+1)% (magic.length+1)}},140);

enter.onclick = check; code.onkeyup = e=>e.key==='Enter'&&check();

function check(){
  errorB.classList.add('hidden');
  if(code.value.trim().toUpperCase() === magic){
    countdown();
  }else{
    errorB.textContent='–ö–æ–¥ –≤–≤–µ–¥—ë–Ω –Ω–µ–≤–µ—Ä–Ω–æ ‚Äî —É—Ö–æ–¥–∏, —Ö–æ–ª–æ–ø!';
    errorB.classList.remove('hidden');
    code.classList.add('shake');
    navigator.vibrate?.([200,100,200]); setTimeout(()=>code.classList.remove('shake'),500);
  }
}

async function countdown(){
  main.classList.add('hidden'); countB.classList.remove('hidden');
  for(let n=3;n>0;n--){countB.textContent=n;navigator.vibrate?.(50);await new Promise(r=>setTimeout(r,800));}
  showSuccess();
}

/* ‚Äî‚Äî‚Äî —É—Å–ø–µ—Ö ‚Äî‚Äî‚Äî */
function showSuccess(){
  countB.classList.add('hidden'); success.classList.remove('hidden');
  window.confetti?.({particleCount:200,spread:180,origin:{y:0.7},emojis:['üëë','üíé','üí∞']});
  fanfare.play(); bgm.volume=.25; bgm.play(); navigator.vibrate?.([120,60,120]);
}

/* –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ flip */
document.querySelectorAll('.flip').forEach(card=>{
  card.addEventListener('click', ()=>card.classList.toggle('flipped'));
});

/* share */
$('share').onclick = () =>
  navigator.share ? navigator.share({title:'Queen Access',text:'–°–º–æ—Ç—Ä–∏ –ø–æ–¥–∞—Ä–æ–∫!',url:location.href})
                  : alert('–°–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –≤—Ä—É—á–Ω—É—é :)');
</script>
</body>
</html>
